<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.spark.bitrade.mapper.dao.PayFastRecordMapper">

    <!--auto generated Code
    <resultMap id="AllColumnMap" type="com.spark.bitrade.entity.PayFastRecord">
        <result column="id" property="id"/>
        <result column="trade_sn" property="tradeSn"/>
        <result column="receipt_id" property="receiptId"/>
        <result column="receipt_wallet_id" property="receiptWalletId"/>
        <result column="receipt_role_id" property="receiptRoleId"/>
        <result column="receipt_role" property="receiptRole"/>
        <result column="receipt_address" property="receiptAddress"/>
        <result column="pay_id" property="payId"/>
        <result column="pay_wallet_id" property="payWalletId"/>
        <result column="pay_role_id" property="payRoleId"/>
        <result column="pay_role" property="payRole"/>
        <result column="pay_address" property="payAddress"/>
        <result column="pay_money" property="payMoney"/>
        <result column="amount" property="amount"/>
        <result column="arrived_amount" property="arrivedAmount"/>
        <result column="unit" property="unit"/>
        <result column="fee_unit" property="feeUnit"/>
        <result column="fee_type" property="feeType"/>
        <result column="fee" property="fee"/>
        <result column="discounts_fee" property="discountsFee"/>
        <result column="trade_type" property="tradeType"/>
        <result column="platform" property="platform"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="status" property="status"/>
        <result column="comment" property="comment"/>
    </resultMap>
    -->

<!--auto generated Code
    <sql id="all_column">
        id,
        trade_sn,
        receipt_id,
        receipt_wallet_id,
        receipt_role_id,
        receipt_role,
        receipt_address,
        pay_id,
        pay_wallet_id,
        pay_role_id,
        pay_role,
        pay_address,
        pay_money,
        amount,
        arrived_amount,
        unit,
        fee_unit,
        fee_type,
        fee,
        discounts_fee,
        trade_type,
        platform,
        create_time,
        update_time,
        status,
        comment
    </sql>
-->
<!--auto generated Code
    <insert id="insert">
        INSERT INTO pay_fast_record
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="pojo.id != null"> id, </if>
            <if test="pojo.tradeSn != null"> trade_sn, </if>
            <if test="pojo.receiptId != null"> receipt_id, </if>
            <if test="pojo.receiptWalletId != null"> receipt_wallet_id, </if>
            <if test="pojo.receiptRoleId != null"> receipt_role_id, </if>
            <if test="pojo.receiptRole != null"> receipt_role, </if>
            <if test="pojo.receiptAddress != null"> receipt_address, </if>
            <if test="pojo.payId != null"> pay_id, </if>
            <if test="pojo.payWalletId != null"> pay_wallet_id, </if>
            <if test="pojo.payRoleId != null"> pay_role_id, </if>
            <if test="pojo.payRole != null"> pay_role, </if>
            <if test="pojo.payAddress != null"> pay_address, </if>
            <if test="pojo.payMoney != null"> pay_money, </if>
            <if test="pojo.amount != null"> amount, </if>
            <if test="pojo.arrivedAmount != null"> arrived_amount, </if>
            <if test="pojo.unit != null"> unit, </if>
            <if test="pojo.feeUnit != null"> fee_unit, </if>
            <if test="pojo.feeType != null"> fee_type, </if>
            <if test="pojo.fee != null"> fee, </if>
            <if test="pojo.discountsFee != null"> discounts_fee, </if>
            <if test="pojo.tradeType != null"> trade_type, </if>
            <if test="pojo.platform != null"> platform, </if>
            <if test="pojo.createTime != null"> create_time, </if>
            <if test="pojo.updateTime != null"> update_time, </if>
            <if test="pojo.status != null"> status, </if>
            <if test="pojo.comment != null"> comment, </if>
        </trim>
        VALUES
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="pojo.id != null"> #{pojo.id}, </if>
            <if test="pojo.tradeSn != null"> #{pojo.tradeSn}, </if>
            <if test="pojo.receiptId != null"> #{pojo.receiptId}, </if>
            <if test="pojo.receiptWalletId != null"> #{pojo.receiptWalletId}, </if>
            <if test="pojo.receiptRoleId != null"> #{pojo.receiptRoleId}, </if>
            <if test="pojo.receiptRole != null"> #{pojo.receiptRole}, </if>
            <if test="pojo.receiptAddress != null"> #{pojo.receiptAddress}, </if>
            <if test="pojo.payId != null"> #{pojo.payId}, </if>
            <if test="pojo.payWalletId != null"> #{pojo.payWalletId}, </if>
            <if test="pojo.payRoleId != null"> #{pojo.payRoleId}, </if>
            <if test="pojo.payRole != null"> #{pojo.payRole}, </if>
            <if test="pojo.payAddress != null"> #{pojo.payAddress}, </if>
            <if test="pojo.payMoney != null"> #{pojo.payMoney}, </if>
            <if test="pojo.amount != null"> #{pojo.amount}, </if>
            <if test="pojo.arrivedAmount != null"> #{pojo.arrivedAmount}, </if>
            <if test="pojo.unit != null"> #{pojo.unit}, </if>
            <if test="pojo.feeUnit != null"> #{pojo.feeUnit}, </if>
            <if test="pojo.feeType != null"> #{pojo.feeType}, </if>
            <if test="pojo.fee != null"> #{pojo.fee}, </if>
            <if test="pojo.discountsFee != null"> #{pojo.discountsFee}, </if>
            <if test="pojo.tradeType != null"> #{pojo.tradeType}, </if>
            <if test="pojo.platform != null"> #{pojo.platform}, </if>
            <if test="pojo.createTime != null"> #{pojo.createTime}, </if>
            <if test="pojo.updateTime != null"> #{pojo.updateTime}, </if>
            <if test="pojo.status != null"> #{pojo.status}, </if>
            <if test="pojo.comment != null"> #{pojo.comment}, </if>
        </trim>
    </insert>
-->
    <!--auto generated Code
    <insert id="insertList">
        INSERT INTO pay_fast_record(
        <include refid="all_column"/>
        )VALUES
        <foreach collection="pojos" item="pojo" index="index" separator=",">
            (
            #{pojo.id},
            #{pojo.tradeSn},
            #{pojo.receiptId},
            #{pojo.receiptWalletId},
            #{pojo.receiptRoleId},
            #{pojo.receiptRole},
            #{pojo.receiptAddress},
            #{pojo.payId},
            #{pojo.payWalletId},
            #{pojo.payRoleId},
            #{pojo.payRole},
            #{pojo.payAddress},
            #{pojo.payMoney},
            #{pojo.amount},
            #{pojo.arrivedAmount},
            #{pojo.unit},
            #{pojo.feeUnit},
            #{pojo.feeType},
            #{pojo.fee},
            #{pojo.discountsFee},
            #{pojo.tradeType},
            #{pojo.platform},
            #{pojo.createTime},
            #{pojo.updateTime},
            #{pojo.status},
            #{pojo.comment}
            )
        </foreach>
    </insert>
    -->
<!--auto generated Code
    <update id="update">
        UPDATE pay_fast_record
        <set>
            <if test="pojo.id != null"> id = #{pojo.id}, </if>
            <if test="pojo.tradeSn != null"> trade_sn = #{pojo.tradeSn}, </if>
            <if test="pojo.receiptId != null"> receipt_id = #{pojo.receiptId}, </if>
            <if test="pojo.receiptWalletId != null"> receipt_wallet_id = #{pojo.receiptWalletId}, </if>
            <if test="pojo.receiptRoleId != null"> receipt_role_id = #{pojo.receiptRoleId}, </if>
            <if test="pojo.receiptRole != null"> receipt_role = #{pojo.receiptRole}, </if>
            <if test="pojo.receiptAddress != null"> receipt_address = #{pojo.receiptAddress}, </if>
            <if test="pojo.payId != null"> pay_id = #{pojo.payId}, </if>
            <if test="pojo.payWalletId != null"> pay_wallet_id = #{pojo.payWalletId}, </if>
            <if test="pojo.payRoleId != null"> pay_role_id = #{pojo.payRoleId}, </if>
            <if test="pojo.payRole != null"> pay_role = #{pojo.payRole}, </if>
            <if test="pojo.payAddress != null"> pay_address = #{pojo.payAddress}, </if>
            <if test="pojo.payMoney != null"> pay_money = #{pojo.payMoney}, </if>
            <if test="pojo.amount != null"> amount = #{pojo.amount}, </if>
            <if test="pojo.arrivedAmount != null"> arrived_amount = #{pojo.arrivedAmount}, </if>
            <if test="pojo.unit != null"> unit = #{pojo.unit}, </if>
            <if test="pojo.feeUnit != null"> fee_unit = #{pojo.feeUnit}, </if>
            <if test="pojo.feeType != null"> fee_type = #{pojo.feeType}, </if>
            <if test="pojo.fee != null"> fee = #{pojo.fee}, </if>
            <if test="pojo.discountsFee != null"> discounts_fee = #{pojo.discountsFee}, </if>
            <if test="pojo.tradeType != null"> trade_type = #{pojo.tradeType}, </if>
            <if test="pojo.platform != null"> platform = #{pojo.platform}, </if>
            <if test="pojo.createTime != null"> create_time = #{pojo.createTime}, </if>
            <if test="pojo.status != null"> status = #{pojo.status}, </if>
            <if test="pojo.comment != null"> comment = #{pojo.comment}, </if>
        </set>
        WHERE id = #{pojo.id}
    </update>
    -->
    <!--auto generated Code
    <select id="select" resultMap="AllColumnMap">
        SELECT <include refid="all_column"/>
        FROM pay_fast_record
        <where>
            <if test="pojo.id != null"> AND id = #{pojo.id} </if>
            <if test="pojo.tradeSn != null"> AND trade_sn = #{pojo.tradeSn} </if>
            <if test="pojo.receiptId != null"> AND receipt_id = #{pojo.receiptId} </if>
            <if test="pojo.receiptWalletId != null"> AND receipt_wallet_id = #{pojo.receiptWalletId} </if>
            <if test="pojo.receiptRoleId != null"> AND receipt_role_id = #{pojo.receiptRoleId} </if>
            <if test="pojo.receiptRole != null"> AND receipt_role = #{pojo.receiptRole} </if>
            <if test="pojo.receiptAddress != null"> AND receipt_address = #{pojo.receiptAddress} </if>
            <if test="pojo.payId != null"> AND pay_id = #{pojo.payId} </if>
            <if test="pojo.payWalletId != null"> AND pay_wallet_id = #{pojo.payWalletId} </if>
            <if test="pojo.payRoleId != null"> AND pay_role_id = #{pojo.payRoleId} </if>
            <if test="pojo.payRole != null"> AND pay_role = #{pojo.payRole} </if>
            <if test="pojo.payAddress != null"> AND pay_address = #{pojo.payAddress} </if>
            <if test="pojo.payMoney != null"> AND pay_money = #{pojo.payMoney} </if>
            <if test="pojo.amount != null"> AND amount = #{pojo.amount} </if>
            <if test="pojo.arrivedAmount != null"> AND arrived_amount = #{pojo.arrivedAmount} </if>
            <if test="pojo.unit != null"> AND unit = #{pojo.unit} </if>
            <if test="pojo.feeUnit != null"> AND fee_unit = #{pojo.feeUnit} </if>
            <if test="pojo.feeType != null"> AND fee_type = #{pojo.feeType} </if>
            <if test="pojo.fee != null"> AND fee = #{pojo.fee} </if>
            <if test="pojo.discountsFee != null"> AND discounts_fee = #{pojo.discountsFee} </if>
            <if test="pojo.tradeType != null"> AND trade_type = #{pojo.tradeType} </if>
            <if test="pojo.platform != null"> AND platform = #{pojo.platform} </if>
            <if test="pojo.createTime != null"> AND create_time = #{pojo.createTime} </if>
            <if test="pojo.updateTime != null"> AND update_time = #{pojo.updateTime} </if>
            <if test="pojo.status != null"> AND status = #{pojo.status} </if>
            <if test="pojo.comment != null"> AND comment = #{pojo.comment} </if>
        </where>
        LIMIT 1000
    </select>
-->
    <!--auto generated Code
    <delete id="delete">
        DELETE FROM pay_fast_record where id = #{pojo.id}
    </delete>
    -->
    <select id="findOneByTradeSn" parameterType="java.lang.String" resultType="com.spark.bitrade.entity.PayFastRecord">
        SELECT * FROM pay_fast_record WHERE trade_sn =#{tradeSn}
    </select>

    <select id="findByMember" parameterType="java.lang.Object" resultType="com.spark.bitrade.entity.PayFastRecord">
        SELECT * FROM pay_fast_record
        <where>
            trade_type = #{transferType} and platform = #{platform} and platform_to = #{platformTo}
            <if test="tradeType == 0">
                and receipt_id = #{memberId}
            </if>
            <if test="tradeType == 1">
                and pay_id = #{memberId}
            </if>
            <if test="unit!= null and unit!=''">
                and unit = #{unit}
            </if>
            <if test="startTime!=null and startTime!='' and endTime!=null and endTime!=''">
                and create_time <![CDATA[>=]]> #{startTime} and create_time <![CDATA[<=]]> #{endTime}
            </if>
        </where>
          ORDER BY create_time DESC
    </select>



    <select id="findlist" parameterType="java.lang.Object" resultType="com.spark.bitrade.entity.PayFastRecord">
        select * from pay_fast_record
        <where>
            platform = #{fromAppid} and platform_to = #{toAppid}
            <if test="transferType!=null and transferType!=''">
                and trade_type = #{transferType}
            </if>
            <if test="transferType==null or transferType ==''">
                and trade_type in (1,2,3)
            </if>
            <!-- 收款方 receipt-->
            <if test="toId!=null and toId!=''">
                and receipt_id = #{toId}
            </if>
            <if test="toPhone!=null and toPhone!=''">
                and receipt_phone like CONCAT('%',#{toPhone},'%')
            </if>
            <!-- 支付方 pay-->
            <if test="fromId!=null and fromId!=''">
                and pay_id  = #{fromId}
            </if>
            <if test="fromPhone!=null and fromPhone!=''">
                and pay_phone like CONCAT('%',#{fromPhone},'%')
            </if>
            <if test="startTime!=null and startTime!='' and endTime!=null and endTime!=''">
                and create_time <![CDATA[>=]]> #{startTime} and create_time <![CDATA[<]]> #{endTime}
            </if>
        </where>
        order by create_time desc
    </select>

    <select id="findFastRecord" parameterType="java.lang.Object" resultType="com.spark.bitrade.entity.PayFastRecord">
        select * from pay_fast_record p
        <where>
            ((platform = #{fromAppid} and pay_id = #{memberId}) or (platform_to = #{toAppid} and receipt_id = #{memberId} ))
            and trade_type in (1,3)
            <if test="unit != null and unit != ''">
                and unit = #{unit}
            </if>
            <if test="startTime!=null and startTime!='' and endTime!=null and endTime!=''">
                and create_time <![CDATA[>=]]> #{startTime} and create_time <![CDATA[<]]> #{endTime}
            </if>
        </where>
        order by create_time desc
    </select>

</mapper>

